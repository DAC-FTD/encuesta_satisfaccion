<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Encuesta de satisfacci√≥n docentes</title>
  
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Select2 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" rel="stylesheet" />
  <!-- FontAwesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

  <!-- Estilos Personalizados -->
  <style>
    body {
        font-family: 'Roboto','Open Sans', Arial, sans-serif;
        background-color: #ffffff;
        color: #002E45;
    }
    .franja-superior {
        background-color: #002E45;
        color: white;
        height: 60px;
    }
    .logo-tigre, .logo-unemi {
        height: 50px;
        object-fit: contain;
    }
    .franja-naranja {
        height: 10px;
        background-color: #FF6900;
    }
    .container-capacit {
    max-width: 980px; margin: auto;
    }
    /* Ocultar secci√≥n de preguntas inicialmente */
    #seccionPreguntas {
    display: none;
    max-width: 800px;
    margin: auto;
    }
    .rating {
        display: flex;
        flex-direction: row-reverse;
        justify-content: center;
        gap: 25px;
        margin-top: 10px;
    }

    .rating input {
        display: none;
    }

    .rating label {
        font-size: 32px;
        color: #ccc;
        cursor: pointer;
        transition: color 0.2s;
    }

    /* HOVER */
    .rating label:hover,
    .rating label:hover ~ label {
        color: #FFCC00;
    }

    /* SELECCI√ìN */
    .rating input:checked ~ label {
        color: #FFCC00;
    }

    /* CARD DESLIZA HACIA LA IZQUIERDA (ocultando) */
    .slide-out-left {
        animation: slideOutLeft 0.4s forwards;
    }

    @keyframes slideOutLeft {
        from { transform: translateX(0); opacity: 1; }
        to { transform: translateX(-100%); opacity: 0; }
    }

    /* CARD DESLIZA DESDE LA DERECHA (mostrando) */
    .slide-in-right {
        animation: slideInRight 0.3s forwards;
    }

    @keyframes slideInRight {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }

    .error-pregunta {
        border: 2px solid #dc3545 !important; 
        border-radius: 8px;
        padding: 8px;
        background-color: #ffe6e6;
    }

    /* M√≥vil */
    @media (max-width: 576px) {
    .rating label {
        padding-right: 0.5rem !important;
    }
     .num_pregunta {
        padding-right: 3rem !important;
    }

    }

  </style>
</head>

<body class="bg-light">

<!-- Encabezado -->
<div class="franja-superior d-flex justify-content-between align-items-center px-3">
    <!-- Izquierda -->
    <div class="d-flex align-items-center">
      <img src="https://dac-ftd.github.io/pry-admin/img/logo-unemi.png" alt="Logo" class="logo-tigre">
    </div>

    <!-- Derecha -->
    <div class="d-flex align-items-center justify-content-end">
        <img src="https://dac-ftd.github.io/pry-admin/img/unemi-logo.png" alt="Logo unemi" class="logo-unemi">
    </div>
</div>
<div class="franja-naranja"></div>

<div class="container container-capacit mt-3 mb-2">
  
  <!-- Tarjeta de T√≠tulo -->
  <div id="cardInicial" class="card shadow pt-2 mb-3">
    <h4 class="mt-1 px-2 fw-bold text-center">Encuesta Satisfacci√≥n Docente</h4>
    <div class="row ">
        <div class="col-12">
            <p class="text-secondary px-4" style="font-size: 14px; text-align:justify;">
            La Direcci√≥n de Aseguramiento de la Calidad pone a disposici√≥n la presente encuesta con el prop√≥sito de conocer la percepci√≥n del personal docente respecto a los servicios institucionales que recibe en el ejercicio de su labor. La informaci√≥n recopilada ser√° fundamental para identificar oportunidades de mejora continua, fortalecer los procesos de apoyo acad√©mico y administrativo, y evaluar el impacto de estos servicios en el desarrollo profesional y en la calidad de la docencia universitaria.
            </p>
        </div>
    </div>
  </div>

  <!-- Tarjeta de Selecci√≥n de Carrera -->
  <div id="cardCabecera"  class="card shadow">
    <div class="card-body p-4">
      <form id="formularioEncuesta">
        
        <!-- Fila de Selects -->
        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="selectFacultad" class="form-label fw-bold">Facultad:</label>
                <select id="selectFacultad" class="form-select select2" style="width: 100%;">
                    <option value="">Seleccione una facultad</option>
                    <!-- Los values deben ser c√≥digos √∫nicos -->
                    <option value="FACE">FACE - Educaci√≥n</option>
                    <option value="FACI">FACI - Ciencias e Ingenier√≠a</option>
                    <option value="FACS">FACS - Salud y Servicios Sociales</option>
                    <option value="FACSECYD">FACSECYD  - Ciencias Sociales, Educaci√≥n Comercial y Derecho </option>
                </select>
            </div>

            <div class="col-md-6 mb-3">
                <label for="selectCarrera" class="form-label fw-bold">Carrera:</label>
                <select id="selectCarrera" class="form-select select2" style="width: 100%;" disabled>
                    <option value="">Seleccione primero una facultad</option>
                </select>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 m-b3">
                <label for="selectDedicacion" class="form-label fw-bold">Dedicaci√≥n:</label>
                <select id="selectDedicacion" class="form-select select2" style="width: 100%;">
                    <option value=""> </option>
                    <!-- Los values deben ser c√≥digos √∫nicos -->
                    <option value="Tiempo completo Ocasional">Tiempo completo Ocasional</option>
                    <option value="Medio tiempo Ocasional">Medio tiempo Ocasional</option>
                    <option value="Tiempo completo Titular">Tiempo completo Titular</option>
                    <option value="Medio tiempo Titular">Medio tiempo Titular</option>
                </select>
            </div>
            <div class="col-md-6 mb-3">
                <label for="selectGenero" class="form-label fw-bold">G√©nero:</label>
                <select id="selectGenero" class="form-select select2" style="width: 100%;">
                    <option value="">Seleccione un g√©nero</option>
                    <option >Masculino</option>
                    <option >Femenino</option>
                </select>
            </div>
          </div>

        <!-- Bot√≥n para continuar -->
        <div class="text-left mt-3">
            <button type="button" id="btnContinuar" class="btn btn-primary" disabled>
                Continuar  <i class="fa-solid fa-angle-right"></i>
            </button>
        </div>

      </form>
    </div>
  </div>

  <!-- Secci√≥n de Preguntas (Oculta al principio) -->
  <div id="seccionPreguntas" class="mt-4">
    <div class="card shadow px-4">
        <h5 class="fw-bold mt-3 text-center">Escala de calificaci√≥n</h5> 
            Para calificar utilice la escala del 1 al 5, donde: <br>
            Menor calificaci√≥n: ‚≠ê<br>
            Mayor calificaci√≥n: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
        </p>
    </div>

    <div class="card shadow mt-4 py-3 px-4">
        <h5 class="fw-bold mt-3 mb-2 text-center">Qu√© tan satisfecho est√° con:</h5> 
        <div class="mb-4">
            <p>1. El apoyo que recibe para realizar sus actividades acad√©micas.</p>
            <div class="text-center mb-2">
                <span class="num_pregunta" style="padding-right: 5.5rem;">1</span>
                <span class="num_pregunta" style="padding-right: 5.5rem;">2</span>
                <span class="num_pregunta" style="padding-right: 5.5rem;">3</span>
                <span class="num_pregunta" style="padding-right: 5.5rem;">4</span>
                <span>5</span>
            </div>
            <div class="rating">
                <input type="radio" id="p1-1" name="p1" value="1">
                <label for="p1-1">‚òÖ</label>
                <input type="radio" id="p1-2" name="p1" value="2">
                <label for="p1-2" style="padding-right: 3rem;">‚òÖ</label>
                <input type="radio" id="p1-3" name="p1" value="3">
                <label for="p1-3" style="padding-right: 3rem;">‚òÖ</label>
                <input type="radio" id="p1-4" name="p1" value="4">
                <label for="p1-4" style="padding-right: 3rem;">‚òÖ</label>
                <input type="radio" id="p1-5" name="p1" value="5">
                <label for="p1-5" style="padding-right: 3rem;">‚òÖ</label>
            </div>
        </div>

            <div class="mb-4">
                <p>2. La cantidad de estudiantes asignados en los cursos que imparte.</p>
                <div class="text-center mb-2">
                    <span class="num_pregunta" style="padding-right: 5.5rem;">1</span>
                    <span class="num_pregunta" style="padding-right: 5.5rem;">2</span>
                    <span class="num_pregunta" style="padding-right: 5.5rem;">3</span>
                    <span class="num_pregunta" style="padding-right: 5.5rem;">4</span>
                    <span>5</span>
                </div>
                <div class="rating">
                    <input type="radio" id="p2-1" name="p2" value="1">
                    <label for="p2-1">‚òÖ</label>
                    <input type="radio" id="p2-2" name="p2" value="2">
                    <label for="p2-2" style="padding-right: 3rem;">‚òÖ</label>
                    <input type="radio" id="p2-3" name="p2" value="3">
                    <label for="p2-3" style="padding-right: 3rem;">‚òÖ</label>
                    <input type="radio" id="p2-4" name="p2" value="4">
                    <label for="p2-4" style="padding-right: 3rem;">‚òÖ</label>
                    <input type="radio" id="p2-5" name="p2" value="5">
                    <label for="p2-5" style="padding-right: 3rem;">‚òÖ</label>
                </div>
          </div>
          <div class="mb-4">
                <p>3. El soporte t√©cnico y conectividad institucional.</p>
                <div class="text-center mb-2">
                    <span class="num_pregunta" style="padding-right: 5.5rem;">1</span>
                    <span class="num_pregunta" style="padding-right: 5.5rem;">2</span>
                    <span class="num_pregunta" style="padding-right: 5.5rem;">3</span>
                    <span class="num_pregunta" style="padding-right: 5.5rem;">4</span>
                    <span>5</span>
                </div>
                <div class="rating">
                    <input type="radio" id="p3-1" name="p3" value="1">
                    <label for="p3-1">‚òÖ</label>
                    <input type="radio" id="p3-2" name="p3" value="2">
                    <label for="p3-2" style="padding-right: 3rem;">‚òÖ</label>
                    <input type="radio" id="p3-3" name="p3" value="3">
                    <label for="p3-3" style="padding-right: 3rem;">‚òÖ</label>
                    <input type="radio" id="p3-4" name="p3" value="4">
                    <label for="p3-4" style="padding-right: 3rem;">‚òÖ</label>
                    <input type="radio" id="p3-5" name="p3" value="5">
                    <label for="p3-5" style="padding-right: 3rem;">‚òÖ</label>
                </div>
          </div>
        <div class="mb-4">
            <p>4. Los incentivos para participar en eventos acad√©micos o de investigaci√≥n.</p>
            <div class="text-center mb-2">
                    <span class="num_pregunta" style="padding-right: 5.5rem;">1</span>
                    <span class="num_pregunta" style="padding-right: 5.5rem;">2</span>
                    <span class="num_pregunta" style="padding-right: 5.5rem;">3</span>
                    <span class="num_pregunta" style="padding-right: 5.5rem;">4</span>
                    <span>5</span>
                </div>
                <div class="rating">
                    <input type="radio" id="p4-1" name="p4" value="1">
                    <label for="p4-1">‚òÖ</label>
                    <input type="radio" id="p4-2" name="p4" value="2">
                    <label for="p4-2" style="padding-right: 3rem;">‚òÖ</label>
                    <input type="radio" id="p4-3" name="p4" value="3">
                    <label for="p4-3" style="padding-right: 3rem;">‚òÖ</label>
                    <input type="radio" id="p4-4" name="p4" value="4">
                    <label for="p4-4" style="padding-right: 3rem;">‚òÖ</label>
                    <input type="radio" id="p4-5" name="p4" value="5">
                    <label for="p4-5" style="padding-right: 3rem;">‚òÖ</label>
                </div>
        </div>
        <div class="mb-4">
            <p>5. La retroalimentaci√≥n recibida tras los procesos de evaluaci√≥n.</p>
            <div class="text-center mb-2">
                <span class="num_pregunta" style="padding-right: 5.5rem;">1</span>
                <span class="num_pregunta" style="padding-right: 5.5rem;">2</span>
                <span class="num_pregunta" style="padding-right: 5.5rem;">3</span>
                <span class="num_pregunta" style="padding-right: 5.5rem;">4</span>
                <span>5</span>
            </div>
            <div class="rating">
                <input type="radio" id="p5-1" name="p5" value="1">
                <label for="p5-1">‚òÖ</label>
                <input type="radio" id="p5-2" name="p5" value="2">
                <label for="p5-2" style="padding-right: 3rem;">‚òÖ</label>
                <input type="radio" id="p5-3" name="p5" value="3">
                <label for="p5-3" style="padding-right: 3rem;">‚òÖ</label>
                <input type="radio" id="p5-4" name="p5" value="4">
                <label for="p5-4" style="padding-right: 3rem;">‚òÖ</label>
                <input type="radio" id="p5-5" name="p5" value="5">
                <label for="p5-5" style="padding-right: 3rem;">‚òÖ</label>
            </div>
        </div>
        <div class="mb-4">
            <p>6. El apoyo institucional para el desarrollo de proyectos de investigaci√≥n.</p>
            <div class="text-center mb-2">
                <span class="num_pregunta" style="padding-right: 5.5rem;">1</span>
                <span class="num_pregunta" style="padding-right: 5.5rem;">2</span>
                <span class="num_pregunta" style="padding-right: 5.5rem;">3</span>
                <span class="num_pregunta" style="padding-right: 5.5rem;">4</span>
                <span>5</span>
            </div>
            <div class="rating">
                <input type="radio" id="p6-1" name="p6" value="1">
                <label for="p6-1">‚òÖ</label>
                <input type="radio" id="p6-2" name="p6" value="2">
                <label for="p6-2" style="padding-right: 3rem;">‚òÖ</label>
                <input type="radio" id="p6-3" name="p6" value="3">
                <label for="p6-3" style="padding-right: 3rem;">‚òÖ</label>
                <input type="radio" id="p6-4" name="p6" value="4">
                <label for="p6-4" style="padding-right: 3rem;">‚òÖ</label>
                <input type="radio" id="p6-5" name="p6" value="5">
                <label for="p6-5" style="padding-right: 3rem;">‚òÖ</label>
            </div>
        </div>

        <div class="text-end mt-3 mb-3">
            <button id="btnFinalizar" class="btn btn-success btn-lg">
                Finalizar Encuesta
            </button>
        </div>
      </div>
  </div>

</div>

<!-- JS Libraries -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


<script>

    
    $(document).ready(function() {
    if (localStorage.getItem("encuestaRealizada") === "true") {
        Swal.fire({
            icon: "info",
            title: "Encuesta ya realizada",
            text: "Usted ya complet√≥ esta encuesta.",
            showConfirmButton: false,
            allowOutsideClick: false,
            allowEscapeKey: false
        });

        // Bloquear interacci√≥n
        $('body').css('pointer-events', 'none');
       // $('body').css('opacity', '0.6');
        }

        // 1. Inicializar Select2 con tema de Bootstrap 5
        $('.select2').select2({
            theme: 'bootstrap-5',
            placeholder: "Seleccione una opci√≥n",
            allowClear: true
        });

        // 2. Base de datos de Carreras (Objeto JSON)
        // Puedes agregar todas las carreras aqu√≠
        const baseDatosCarreras = {
            "FACE": [
                { id: "pafd", text: "Pedagog√≠a de la Actividad F√≠sica y Deporte" },
                { id: "edu_pre", text: "Educaci√≥n modalidad presencial" },
                { id: "edub_onl", text: "Educaci√≥n B√°sica modalidad en l√≠nea" },
                { id: "edues_pre", text: "Educaci√≥n Especial modalidad presencial" },
                { id: "eduini_smpre", text: "Educaci√≥n Inicial modalidad semipresencial" },
                { id: "eduini_onl", text: "Educaci√≥n Inicial modalidad en l√≠nea" },
                { id: "pine_onl", text: "Pedagog√≠a de los Idiomas Nacionales y Extranjeros modalidad en l√≠nea" },
                { id: "pll", text: "Pedagog√≠a de la Lengua y Literatura" },
                { id: "pce", text: "Pedagog√≠a de las Ciencias Experimentales" },
                { id: "pine_pre", text: "Pedagog√≠a de los Idiomas Nacionales y Extranjeros modalidad presencial" }

            ],
            "FACI": [
                { id: "soft", text: "Software" },
                { id: "ind", text: "Industrial" },
                { id: "amb", text: "Ambiental" },
                { id: "ali", text: "Alimentos" },
                { id: "ti", text: "Tecnolog√≠as de la Informaci√≥n" },
                { id: "bio", text: "Biotecnolog√≠a" },
                { id: "arq", text: "Arquitectura Sostenible" }

            ],
            "FACS": [
                { id: "enf", text: "Enfermer√≠a" },
                { id: "nut", text: "Nutrici√≥n y Diet√©tica" },
                { id: "med", text: "Medicina" },
                { id: "fis", text: "Fisioterapia" }
            ],
            "FACSECYD": [
                { id: "cont", text: "Contabilidad y Auditor√≠a " },
                { id: "adm_onl", text: "Administraci√≥n de Empresas modalidad en l√≠nea " },
                { id: "adm_pre", text: "Administraci√≥n de Empresas modalidad presencial " },
                { id: "com_onl", text: "Comunicaci√≥n modalidad en l√≠nea" },
                { id: "com_pre", text: "Comunicaci√≥n modalidad presencial" },
                { id: "der", text: "Derecho" },
                { id: "eco_onl", text: "Econom√≠a modalidad en l√≠nea" },
                { id: "eco_pre", text: "Econom√≠a modalidad presencial" },
                { id: "psi_pre", text: "Psicolog√≠a modalidad presencial" },
                { id: "psi_onl", text: "Psicolog√≠a modalidad en l√≠nea" },
                { id: "mult", text: "Multimedia y Producci√≥n Audiovisual" },
                { id: "tsoc_onl", text: "Trabajo social modalidad en l√≠nea" },
                { id: "tsoc_spre", text: "Trabajo social modalidad semipresencial" },
                { id: "tur_onl", text: "Turismo modalidad en l√≠nea " },
                { id: "tur_pre", text: "Turismo modalidad presencial" },
            ]
        };

        // 3. Evento: Cuando cambia la Facultad
        $('#selectFacultad').on('change', function() {
            const facultadSeleccionada = $(this).val();
            const $selectCarrera = $('#selectCarrera');
            const $btnContinuar = $('#btnContinuar');

            // Limpiar el select de carreras
            $selectCarrera.empty().trigger('change');
            
            // Ocultar preguntas si cambia la facultad
            $('#seccionPreguntas').slideUp();
            $btnContinuar.prop('disabled', true);

            if (facultadSeleccionada && baseDatosCarreras[facultadSeleccionada]) {
                // Habilitar select de carrera
                $selectCarrera.prop('disabled', false);
                
                // Agregar opci√≥n por defecto
                const defaultOption = new Option('Seleccione una carrera', '', true, true);
                $selectCarrera.append(defaultOption);

                // Cargar las carreras correspondientes
                baseDatosCarreras[facultadSeleccionada].forEach(function(carrera) {
                    const newOption = new Option(carrera.text, carrera.id, false, false);
                    $selectCarrera.append(newOption);
                });

                // Actualizar Select2 para que muestre los cambios
                $selectCarrera.trigger('change');
            } else {
                // Si no hay facultad, bloquear carrera
                $selectCarrera.prop('disabled', true);
                const defaultOption = new Option('Seleccione primero una facultad', '', true, true);
                $selectCarrera.append(defaultOption).trigger('change');
            }
        });

        // 4. Evento: Cuando selecciona carrera habilita bot√≥n
            function validarCampos() {
                const carrera = $('#selectCarrera').val();
                const dedic = $('#selectDedicacion').val();
                const gen = $('#selectGenero').val();

                if (carrera && dedic && gen) {
                    $('#btnContinuar').prop('disabled', false);
                } else {
                    $('#btnContinuar').prop('disabled', true);
                }
            }

            // Ejecutar validaci√≥n cada vez que se cambia un select
            $('#selectCarrera, #selectDedicacion, #selectGenero').on('change', validarCampos);

        // 5. Bot√≥n Continuar (Simulaci√≥n de mostrar preguntas)
    $('#btnContinuar').on('click', function() {
        // Cards del inicio -> salida hacia la izquierda
        $('#cardInicial').addClass('slide-out-left');
        $('#cardCabecera').addClass('slide-out-left');

        // Retraso para que aparezcan las preguntas luego de la salida
        setTimeout(function() {
            $('#cardInicial').hide();
            $('#cardCabecera').hide();

            // Mostrar secci√≥n preguntas entrando desde la derecha
            $('#seccionPreguntas')
                .show()
                .addClass('slide-in-right');
        }, 300); // igual tiempo que la animaci√≥n
            // Scroll suave
        $('html, body').animate({
            scrollTop: $("#seccionPreguntas").offset().top
        }, 800);
    });

    // 6. Validaci√≥n del bot√≥n Finalizar
    $('#btnFinalizar').on('click', function () {

    let preguntas = ["p1","p2","p3","p4","p5","p6"];
    let primeraSinResponder = null;

    preguntas.forEach(function(id) {
        let grupo = $('input[name="' + id + '"]');
        let contenedor = grupo.closest('.mb-4');

        contenedor.removeClass('error-pregunta');

        if (!grupo.is(':checked')) {
            if (!primeraSinResponder) primeraSinResponder = contenedor;
            contenedor.addClass('error-pregunta');
        }
    });

    if (primeraSinResponder) {
        $('html, body').animate({
            scrollTop: primeraSinResponder.offset().top - 20
        }, 600);

        //alert("Por favor complete todas las preguntas antes de finalizar.");
        Swal.fire({
            icon: "error",
            title: "Preguntas sin contestar!",
            text: "Porfavor, responda todos las preguntas antes de enviar la encuesta.",
            ConfirmButton: "Aceptar",
            allowOutsideClick: false, // ‚ùå No permite cerrar haciendo clic afuera
            allowEscapeKey: false,   // ‚ùå No permite cerrar con ESC
            allowEnterKey: false
        });
        return;
    }

    // Mostrar pantalla de carga
    $('#pantallaCargando').fadeIn(200);

    // Datos del formulario
    const data = {
        facultad: $('#selectFacultad').val(),
        carrera: $('#selectCarrera option:selected').text(),
        dedicacion: $('#selectDedicacion').val(),
        genero: $('#selectGenero').val(),
        p1: $('input[name="p1"]:checked').val(),
        p2: $('input[name="p2"]:checked').val(),
        p3: $('input[name="p3"]:checked').val(),
        p4: $('input[name="p4"]:checked').val(),
        p5: $('input[name="p5"]:checked').val(),
        p6: $('input[name="p6"]:checked').val(),
    };

    // üëâ Reemplaza con TU URL del Web App
    const url = "https://script.google.com/macros/s/AKfycbzx-J4v5iBv7168crBq_sdbiA2z_X6XxEvTbehtMVKPAiuObL5U4-p8iXan2za3y5EAJQ/exec";

    // Enviar datos al Google Sheet
        fetch(url, {
            method: "POST",
            mode: "no-cors",   // ‚Üê evita CORS
            body: JSON.stringify(data)
        })
        .then(() => {
    $('#pantallaCargando').fadeOut(200);
    localStorage.setItem("encuestaRealizada", "true");
    Swal.fire({
        icon: "success",
        title: "!Gracias por su participaci√≥n!",
        html: '<p style="text-align: justify;">Su participaci√≥n contribuir√° directamente al fortalecimiento institucional y a la excelencia acad√©mica de nuestra universidad.</p>',
        showConfirmButton: false,
        allowOutsideClick: false, // ‚ùå No permite cerrar haciendo clic afuera
        allowEscapeKey: false,   // ‚ùå No permite cerrar con ESC
        allowEnterKey: false
    }).then(() => {
        // Bloquear toda la pantalla
        $('body').css('pointer-events', 'none');
        $('body').css('opacity', '0.6');
        });
    })
    .catch(err => {
        $('#pantallaCargando').fadeOut(200);

        Swal.fire({
            icon: "error",
            title: "Error inesperado",
            text: err,
            confirmButtonText: "Aceptar",
            allowOutsideClick: false,
            allowEscapeKey: false
        });
});

});

    });
</script>

<!-- Pantalla de carga -->
<div id="pantallaCargando" 
     style="display:none;
            position:fixed;
            top:0; left:0; right:0; bottom:0;
            background:rgba(255,255,255,0.9);
            z-index:9999;
            text-align:center;
            padding-top:20%;">
    <div class="spinner-border text-primary" role="status" style="width: 5rem; height: 5rem;"></div>
    <h4 class="mt-3 text-primary">Enviando encuesta...</h4>
</div>

</body>
</html>
